:: Ir al directorio del proyecto
cd /d D:\Projects\WSafe.Api.Analysis

:: 1. Verificar si la rama main existe localmente
git branch --list main
IF %ERRORLEVEL% NEQ 0 (
    echo ⚙️ Creando rama main local desde origin/main...
    git fetch origin
    git checkout -b main origin/main
) ELSE (
    echo ✅ La rama main ya existe localmente.
    git checkout main
)

:: 2. Configurar el seguimiento de la rama remota
git branch --set-upstream-to=origin/main main

:: 3. Traer últimos cambios del remoto
git pull

:: 4. Agregar todos los cambios pendientes
git add .

:: 5. Confirmar cambios con mensaje
git commit -m "Sincronizando rama main con remoto"

:: 6. Enviar cambios a GitHub
git push -u origin main

:: 7. Mostrar estado final
git status
